import React from "react";
import { shallow, mount, render } from "enzyme";
import Post from "./Post";
import { BrowserRouter } from "react-router-dom";
import CommUnityContext from "../../contexts/context";

it("expect to render Post component", () => {
    const mockValue = {"user":{"id":1,"first_name":"Zoe","email":"zoe@gmail.com","location":{"lat":40.748225,"lng":-73.89698620000001},"radius":"3.00"},"user_posts":[{"id":38,"user_id":1,"post_type":"request","description":null,"urgency":"low","date_created":"2020-09-23T20:33:01.817Z","location":{"lat":40.748225,"lng":-73.89698620000001},"radius":"3.00","first_name":"Zoe","categories":["Phone call","Running errands"],"distance_from_user":"0"},{"id":40,"user_id":1,"post_type":"request","description":null,"urgency":"low","date_created":"2020-09-23T20:33:19.724Z","location":{"lat":40.748225,"lng":-73.89698620000001},"radius":"3.00","first_name":"Zoe","categories":["Online chat","Phone call"],"distance_from_user":"0"}],"neighborhood_posts":[{"id":4,"user_id":2,"post_type":"offer","description":null,"urgency":null,"date_created":"2020-06-11T21:24:05.882Z","location":{"lat":40.7532952,"lng":-73.9068973},"radius":"3.00","first_name":"James","categories":["Running errands","Picking up supplies"],"distance_from_user":"1007"},{"id":17,"user_id":3,"post_type":"request","description":null,"urgency":"medium","date_created":"2020-09-16T21:09:57.136Z","location":{"lat":40.7432931,"lng":-73.9229366},"radius":"2.75","first_name":"Anna","categories":["Dog walking","Phone call","Picking up supplies"],"distance_from_user":"2254"},{"id":18,"user_id":4,"post_type":"offer","description":null,"urgency":null,"date_created":"2020-09-16T21:12:26.077Z","location":{"lat":40.737975,"lng":-73.8801301},"radius":"4.00","first_name":"Yasmin","categories":["Dog walking","Picking up supplies"],"distance_from_user":"1821"},{"id":19,"user_id":11,"post_type":"request","description":null,"urgency":"high","date_created":"2020-09-18T16:51:24.339Z","location":{"lat":40.7532952,"lng":-73.9068973},"radius":"4.00","first_name":"Demo","categories":["Phone call","Running errands"],"distance_from_user":"1007"}],"chats":[{"id":25,"user1":{"first_name":"Zoe","id":1},"user2":{"first_name":"James","id":2},"post":{"id":4,"user_id":2,"post_type":"offer","description":null,"urgency":null,"date_created":"2020-06-11T21:24:05.882246"},"messages":[{"id":285,"chat_id":25,"sender_id":1,"message_timestamp":"2020-09-17T18:22:47.088676","message_content":"Hi James, I'm also based in Queens and I need help getting my medication from the pharmacy while I'm quarantining. Are you near the Duane Reade on Roosevelt Ave in Jackson Heights?"},{"id":286,"chat_id":25,"sender_id":2,"message_timestamp":"2020-09-17T18:23:29.967525","message_content":"Hey Zoe! Nice to meet you. Yes, I'm about half a mile from there."},{"id":287,"chat_id":25,"sender_id":2,"message_timestamp":"2020-09-17T18:23:45.977949","message_content":"Happy to pick up whatever you need. Groceries, medication, anything!"},{"id":288,"chat_id":25,"sender_id":1,"message_timestamp":"2020-09-17T18:24:12.017073","message_content":"Awesome, thank you so much! "},{"id":289,"chat_id":25,"sender_id":1,"message_timestamp":"2020-09-17T18:24:45.266031","message_content":"Would it be ok if I sent you a list of a couple of things? I think there's a grocery store right by that Duane Reade and a couple of pantry items would be a lifesaver."},{"id":290,"chat_id":25,"sender_id":2,"message_timestamp":"2020-09-17T18:25:06.813435","message_content":"That works for me! What do you need? :) "},{"id":320,"chat_id":25,"sender_id":1,"message_timestamp":"2020-09-24T02:09:43.209634","message_content":"hi"}]}],"socket":{"io":{"nsps":{},"subs":[{},{},{},{},{},{}],"opts":{"path":"/socket.io","hostname":"evening-springs-65156.herokuapp.com","secure":true,"port":"443"},"_reconnection":true,"_reconnectionAttempts":null,"_reconnectionDelay":1000,"_reconnectionDelayMax":5000,"_randomizationFactor":0.5,"backoff":{"ms":1000,"max":5000,"factor":2,"jitter":0.5,"attempts":0},"_timeout":20000,"readyState":"open","uri":"https://evening-springs-65156.herokuapp.com","connecting":[null],"lastPing":null,"encoding":false,"packetBuffer":[],"encoder":{},"decoder":{"reconstructor":null,"_callbacks":{"$decoded":[null]}},"autoConnect":true,"engine":{"secure":true,"agent":false,"hostname":"evening-springs-65156.herokuapp.com","port":"443","query":{},"upgrade":true,"path":"/socket.io/","forceJSONP":false,"jsonp":true,"forceBase64":false,"enablesXDR":false,"withCredentials":true,"timestampParam":"t","transports":["polling","websocket"],"transportOptions":{},"readyState":"open","writeBuffer":[],"prevBufferLen":0,"policyPort":843,"rememberUpgrade":false,"binaryType":null,"perMessageDeflate":{"threshold":1024},"pfx":null,"key":null,"passphrase":null,"cert":null,"ca":null,"ciphers":null,"rejectUnauthorized":true,"forceNode":false,"isReactNative":false,"id":"SfG92F29xpI4v0ukAAAE","upgrades":["websocket"],"pingInterval":25000,"pingTimeout":5000,"pingIntervalTimer":9,"pingTimeoutTimer":24,"transport":{"usingBrowserWebSocket":true,"path":"/socket.io/","hostname":"evening-springs-65156.herokuapp.com","port":"443","secure":true,"query":{"EIO":3,"transport":"websocket","sid":"SfG92F29xpI4v0ukAAAE"},"timestampParam":"t","readyState":"open","agent":false,"enablesXDR":false,"withCredentials":true,"pfx":null,"key":null,"passphrase":null,"cert":null,"ca":null,"ciphers":null,"rejectUnauthorized":true,"forceNode":false,"isReactNative":false,"_callbacks":{"$drain":[null],"$packet":[null],"$error":[null],"$close":[null]},"ws":{},"writable":true},"_callbacks":{"$data":[null],"$ping":[null],"$pong":[null],"$error":[null],"$close":[null],"$heartbeat":[null]},"upgrading":false},"skipReconnect":false,"_callbacks":{"$open":[null],"$packet":[null],"$close":[null]}},"nsp":"/","ids":0,"acks":{},"receiveBuffer":[],"sendBuffer":[],"connected":true,"disconnected":false,"flags":{},"subs":[{},{},{}],"_callbacks":{"$connecting":[null],"$connect":[null,null],"$reconnect":[null],"$PRIVATE_MESSAGE":[null],"$NEW_CHAT":[null],"$CHAT_TO_REMOVE":[null]},"id":"SfG92F29xpI4v0ukAAAE"},"activeChat":null,"timeZone":"America/New_York","loading":false}
    expect(
        render(
            <CommUnityContext.Provider value={mockValue}>
                <BrowserRouter>
                    <Post categories={mockValue.neighborhood_posts[0].categories} first_name={mockValue.neighborhood_posts[0].first_name} />
                </BrowserRouter>
            </CommUnityContext.Provider>
        )
    ).toMatchSnapshot()
})
